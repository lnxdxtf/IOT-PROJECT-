<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <title>Monitoramento em Tempo Real</title>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.02); }
        }
        
        .alert-active {
            animation: pulse 1s ease-in-out infinite;
        }
        
        #alert-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 0, 0, 0.3);
            z-index: 999;
            pointer-events: none;
        }
        
        #alert-box {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #ff0000;
            color: white;
            padding: 30px 50px;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.8);
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            z-index: 1001;
        }
    </style>
</head>

<body style="background:#111;color:#fff;font-family:Arial;padding:20px">

    <div id="alert-overlay"></div>
    
    <div id="alert-box">
        <div style="font-size: 48px; margin-bottom: 10px;">游댠丘멆잺游댠</div>
        <div>ALERTA CR칈TICO DE INC칅NDIO!</div>
        <div style="font-size: 18px; margin-top: 10px;">ALERTA DE INC칅NDIO</div>
        <button onclick="muteAlert()" style="margin-top: 20px; padding: 10px 20px; font-size: 16px; cursor: pointer; background: white; color: red; border: none; border-radius: 5px; font-weight: bold;">Silenciar Alarme</button>
    </div>

    <div id="alert" style="display:none; position:fixed; top:0; left:0; width:100%; background:red; color:white; text-align:center; padding:10px; font-size:20px; z-index:1000;">
        <span id="alert-message"></span>
    </div>

    <h1>游니 Monitoramento em Tempo Real</h1>

    <h3>Selecionar dispositivo:</h3>
    <select id="device-select"></select>
    <button onclick="loadHistory()">Carregar hist칩rico</button>
    <button onclick="clearHistory()">Limpar Hist칩rico</button>

    <div>
        <input type="radio" id="all" name="view" value="all"  onchange="changeView()">
        <label for="all">Ver Todos em Um Gr치fico</label>
        <input type="radio" id="separate" name="view" value="separate" checked onchange="changeView()">
        <label for="separate">Ver Gr치ficos Separados</label>
    </div>

    <h2>Gr치fico:</h2>
    <div id="all-chart" style="width:100%; height:400px; background:#222; padding:10px; margin-bottom:20px">
        <canvas id="chart"></canvas>
    </div>
    <div id="separate-charts" style="display:none">
        <div style="background:#222; padding:10px; height:400px;">
            <canvas id="temp-chart" style="width:100%; height:100%;"></canvas>
        </div>
        <div style="background:#222; padding:10px; height:400px;">
            <canvas id="hum-chart" style="width:100%; height:100%;"></canvas>
        </div>
        <div style="background:#222; padding:10px; height:400px;">
            <canvas id="smoke-chart" style="width:100%; height:100%;"></canvas>
        </div>
    </div>

    <h2>Dados: <button onclick="exportToCSV()" style="float:right;">Exportar CSV</button></h2>
    <div style="margin-top: 20px;">
        <table id="data-table" style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #333; color: #fff;">
                    <th style="padding: 8px; border: 1px solid #555;">Timestamp</th>
                    <th style="padding: 8px; border: 1px solid #555;">Temperature</th>
                    <th style="padding: 8px; border: 1px solid #555;">Humidity</th>
                    <th style="padding: 8px; border: 1px solid #555;">Smoke Level</th>
                </tr>
            </thead>
            <tbody id="data-tbody">
            </tbody>
        </table>
    </div>

    <script src="/static/script.js"></script>

</body>
</html>
